#!/bin/bash

echo "START OF DEPLOYMENT"
echo ""

mkdir -p var/QuestSystemBehavior
rm -rf var/QuestSystemBehavior/* > /dev/null 2>&1
rm -r var/QuestSystemBehavior.zip > /dev/null 2>&1
cd var

echo "rename jar..."
cp mapmaker-s5.jar QuestSystemBehavior/QuestSystemBehavior.jar
cp ../bin/QuestSystemBehavior.exe ./QuestSystemBehavior/QuestSystemBehavior.exe
cp ../bin/QuestSystemBehavior.sh ./QuestSystemBehavior/QuestSystemBehavior.sh
echo "done!"

echo "copy lib..."
mkdir -p QuestSystemBehavior/lua/orthus/lua
cp -r ../lua/orthus/lua/qsb ./QuestSystemBehavior/lua/orthus/lua
cp ../lua/mainmapscript.lua ./QuestSystemBehavior/lua/mainmapscript.lua
cp ../lua/mapscript.lua ./QuestSystemBehavior/lua/mapscript.lua
echo "done!"

echo "copy cnf..."
cp -r ../cnf QuestSystemBehavior/cnf
echo "done!"

echo "copy bba tools..."
mkdir -p QuestSystemBehavior/bin/
cp -r ../bin/bba5.exe QuestSystemBehavior/bin/bba5.exe
echo "done!"

echo "creating archive..."
zip -9 -T QuestSystemBehavior.zip -r QuestSystemBehavior
echo "done!"

echo ""
echo "FINISHED DEPLOYMENT"